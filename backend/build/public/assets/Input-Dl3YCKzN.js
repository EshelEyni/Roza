import{j as m,r as d,w as E,K as H}from"./index-BKuXz_yj.js";import{c as N}from"./PageContent-D57lKvj_.js";const D=({children:n,className:e="text-3xl md:text-2xl font-bold text-app-800",addedClassName:t})=>m.jsx("h3",{className:`${e} ${t}`,children:n});function P(n,e=!0,t=[]){const s=d.useRef(null);return d.useEffect(()=>{function o(c){var r;const i=(r=c==null?void 0:c.target)==null?void 0:r.id;t.includes(i)||s.current&&!s.current.contains(c.target)&&n()}return document.addEventListener("click",o,e),()=>document.removeEventListener("click",o,e)},[n,e,t]),{outsideClickRef:s}}const L=({onClick:n,darkMode:e=!1})=>m.jsx("div",{className:N("fixed left-0 top-0 z-[100] h-screen w-screen cursor-pointer",{"bg-gray-700 bg-opacity-80":e},{"bg-transparent":!e}),onClick:n});function y(n,e){var r;const t=(r=n.current)==null?void 0:r.getBoundingClientRect();if(!t)return;const o=window.innerHeight-t.top<e,c={top:t.bottom+t.height/2+window.scrollY},i={bottom:window.innerHeight-t.top+t.height/2};return{isModalAbove:o,position:{...o?i:c,left:t.left+t.width/2+window.scrollX},rect:t}}const w=d.createContext(void 0),v=({children:n,externalStateControl:e,onClose:t,onOpen:s,onAfterClose:o})=>{const[c,i]=d.useState(""),[r,f]=d.useState(null),[x,h]=d.useState(null),[u,b]=d.useState(!1),a=()=>{if(t==null||t(),e){e.setOpenedModalName(""),o==null||o();return}i(""),o==null||o()},l=M=>{if(s==null||s(),e){e.setOpenedModalName(M);return}i(M)},{debouncedFunc:p,cancel:g}=E(()=>{a()},500),j={openedModalName:(e==null?void 0:e.openedModalName)||c,close:a,open:l,position:r,setPosition:f,isModalAbove:u,setIsModalAbove:b,modalHoverGuardZone:x,setModalHoverGuardZone:h,debouncedClose:p,cancelDebouncedClose:g};return m.jsx(w.Provider,{value:j,children:n})},k=({children:n,modalName:e,className:t="rounded-md bg-app-500 text-xl md:text-lg px-5 py-2 md:px-4 md:py-1 text-white hover:bg-app-600 cursor-pointer",setPositionByRef:s=!1,modalHeight:o=0,externalControlFunc:c,isSmall:i})=>{const{open:r,setPosition:f,setIsModalAbove:x}=d.useContext(w),h=d.useRef(null);i&&(t=`${t} !text-lg !px-3 !py-1 md:!px-3 md:!py-0`);const u=d.useCallback(()=>{const a=y(h,o),{isModalAbove:l,position:p}=a;x(l),f(p)},[o,x,f]),b=()=>{if(s&&u(),c)return c();r(e)};return d.useEffect(()=>{if(!s)return;const a=["wheel","scroll","resize"];return a.forEach(l=>{window.addEventListener(l,u)}),()=>{a.forEach(l=>{window.removeEventListener(l,u)})}},[s,u]),d.cloneElement(n,{onClick:b,ref:h,className:t})},O=({children:n,onClick:e,className:t="rounded-md bg-app-500 text-xl md:text-lg px-5 py-2 md:px-4 md:py-1 text-white hover:bg-app-600 cursor-pointer"})=>{const{close:s}=d.useContext(w);return d.cloneElement(n,{onClick:()=>{e==null||e(),s()},className:t})},I=({children:n,modalName:e,modalHeight:t=0})=>{const{open:s,setPosition:o,setIsModalAbove:c,setModalHoverGuardZone:i,debouncedClose:r,cancelDebouncedClose:f}=d.useContext(w),x=d.useRef(null),{debouncedFunc:h,cancel:u}=E(b,500);function b(){const p=y(x,t);p&&(o(p.position),c(p.isModalAbove),i({height:p.rect.height,width:p.rect.width}),s(e))}function a(){f(),h()}function l(){u(),r()}return m.jsx("div",{className:"modal-hover-open",ref:x,onMouseEnter:a,onMouseLeave:l,children:n})},R=({children:n,name:e,className:t="fixed left-1/2 top-1/2 z-[150] flex min-w-[300px] -translate-x-1/2 -translate-y-1/2 transform flex-col items-center gap-12 overflow-auto rounded-lg bg-app-100 p-4 shadow-lg md:min-w-[400px]",elementId:s="root",style:o={},hoverControl:c=!1})=>{const{openedModalName:i,open:r,close:f,position:x,isModalAbove:h,modalHoverGuardZone:u,debouncedClose:b,cancelDebouncedClose:a}=d.useContext(w),{outsideClickRef:l}=P(f);function p(){a(),r(e)}function g(){b()}return e!==i?null:H.createPortal(m.jsxs(m.Fragment,{children:[m.jsx(L,{onClick:f,darkMode:!0}),m.jsxs("section",{className:t,style:{...o,...x},ref:l,onMouseEnter:()=>c&&p(),onMouseLeave:()=>c&&g(),"data-testid":"modal-window",children:[n,c&&u&&m.jsx("div",{className:"modal-hover-guard-zone",style:{top:h?"100%":`-${u.height/2}px`,height:`${u.height/2}px`||"10%",width:`${u.width}px`||"10%"}})]})]}),document.getElementById(s))};v.OpenBtn=k;v.Window=R;v.CloseBtn=O;v.ModalHoverOpen=I;const z=({type:n,defaultValue:e,onChange:t,placeholder:s,name:o,className:c="w-full rounded-md border border-app-900 bg-gray-50 px-4 py-2 text-3xl font-bold text-app-700",autoFocus:i})=>m.jsx("input",{type:n,onChange:t,defaultValue:e,placeholder:s,name:o,className:c,autoFocus:i,autoComplete:"off"});export{D as H,z as I,v as M};
