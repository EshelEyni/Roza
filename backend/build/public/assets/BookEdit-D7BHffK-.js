import{x as w,B as H,c as L,C as j,j as e,w as B,y as v,L as A}from"./index-BKuXz_yj.js";import{H as T,B as E,M as I,P as M,E as P}from"./PageContent-D57lKvj_.js";import{B as R,a as V,b as G,c as U,d as q}from"./BtnAddBookItem-CsGaL8ce.js";import{a as d}from"./P-j1db5U2u.js";import{S as C}from"./SlateEditor-CkMUeekQ.js";import{I as z}from"./Input-Dl3YCKzN.js";import{H as J}from"./PageTitle-Do5Avypk.js";import"./Article-BYGzp_fN.js";const K=()=>{const{book:t,dataItemType:i,dataItemId:r,item:a,itemTitle:l,textEl:h,chatperTextEl:k,onGoToDetails:f}=w(),{updateBook:x}=H(),{t:u}=L(),{description:y,text:b}={description:u("description"),text:u("text")},D=a&&(j(a)?b:y)||"";function F(o){if(!t||!i||!r||!a)return;const n=o.target.value;g({dataItemType:i,dataItemId:r,field:"name",value:n})}function g({dataItemType:o,dataItemId:n,field:m,value:p}){if(!t||!o||!n||!Array.isArray(t[o])||!a)return;const c={...t};switch(o){case"chapters":c.chapters=t.chapters.map(s=>s.id===n?{...s,[m]:p}:s);break;case"characters":c.characters=t.characters.map(s=>s.id===n?{...s,[m]:p}:s);break;case"themes":c.themes=t.themes.map(s=>s.id===n?{...s,[m]:p}:s);break;case"plotlines":c.plotlines=t.plotlines.map(s=>s.id===n?{...s,[m]:p}:s);break;case"notes":c.notes=t.notes.map(s=>s.id===n?{...s,[m]:p}:s);break}x(c)}function N(o){if(!t||!i||!r||!a)return;const n=j(a)?"text":"description";g({dataItemType:i,dataItemId:r,field:n,value:o})}function S(o){!t||!i||!r||!a||g({dataItemType:i,dataItemId:r,field:"text",value:o})}return!t||!i||!r||!a?null:e.jsxs("section",{className:"flex h-full w-full flex-col justify-center gap-4",children:[e.jsx(R,{}),e.jsx(d,{}),e.jsx(J,{children:j(a)?e.jsx(T,{children:l}):e.jsx(z,{type:"text",onChange:B(o=>F(o),500).debouncedFunc,defaultValue:a.name,placeholder:l})}),e.jsx(d,{}),e.jsx(T,{children:D}),e.jsx(C,{initialValue:h,onChange:B(o=>N(o),500).debouncedFunc,fullScreenTitle:j(a)?t.name||u("book"):l}),v(a)&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(T,{children:b}),e.jsx(C,{initialValue:k,onChange:B(o=>S(o),500).debouncedFunc,fullScreenTitle:l})]}),e.jsx(d,{}),e.jsxs("div",{className:"flex w-full items-center justify-end gap-2 bg-app-100",children:[e.jsx(E,{onClick:()=>f({isGoToRootPage:!0}),children:u("goToBook")}),e.jsx(E,{onClick:f,children:u("goToDetails")})]})]})},ee=()=>{const{book:t,errorBook:i,isErrorBook:r,isLoadingBook:a,filterBy:l,isDetailsBookShowing:h,isDataItemDetailsShowing:k,bookDataItemTypes:f}=w();return e.jsx(I,{children:e.jsxs(M,{children:[a&&e.jsx(A,{}),r&&e.jsx(P,{msg:i instanceof Error?i.message:""}),h&&!!t&&e.jsxs("div",{className:"flex w-full flex-col gap-1",children:[e.jsx(V,{isEdit:!0}),e.jsx(d,{}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-8",children:[e.jsx(G,{}),e.jsx(U,{})]}),e.jsx(d,{}),f.map(x=>e.jsx(q,{isRendered:l===x,type:x,isEdit:!0},x))]}),k&&e.jsx(K,{})]})})};export{ee as default};
