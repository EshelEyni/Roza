import{e as j,i as A,h,j as e,u as y,a as b,p as E,r as L,q as x,c as w}from"./index-BnA0ap6K.js";import{A as C}from"./Article-bNPJyB0o.js";import{H as N}from"./Input-f5-EZKHG.js";import{I as M,E as P,A as G,a as T,G as q,b as D,B as H}from"./EntityListTitleContainer-B5IRMdBa.js";import{H as S,E as Q,B as $}from"./PageContent-ihS0kPnQ.js";const F=({book:t})=>{const{loggedInUser:s}=j(),i=t.createdAt?A(t.createdAt,(s==null?void 0:s.language)||"en"):null,r=h();function n(){r(`/book/${t.id}`)}function a(u){return t[u].length}const d=[{label:"chapters",value:a("chapters")},{label:"characters",value:a("characters")},{label:"themes",value:a("themes")},{label:"plotlines",value:a("plotlines")},{label:"notes",value:a("notes")},{label:"createdAt",value:i}];return e.jsxs(C,{onClick:n,children:[e.jsx(N,{children:t.name}),e.jsx(M,{list:d})]})};function I(){const t=y(),s=h(),{mutate:i,isPending:r}=b({mutationFn:async n=>E.add(n),onSuccess:n=>{t.invalidateQueries({queryKey:["books"]}),s(`/book/${n.id}`)}});return{addBook:i,isPendingAddBook:r}}const O=({books:t,errorBooks:s,isLoadingBooks:i,isErrorBooks:r,isNoBooks:n,isHomePage:a=!1,paginationIdx:d,intersectionRef:u})=>{const{loggedInUser:o}=j(),[m,f]=L.useState(x()),{addBook:k}=I(),{t:l}=w(),p=h();function v(){p("/books")}function B(c){f({...m,[c.target.name]:c.target.value})}function g(){!m.name||!(o!=null&&o.id)||(k({...m,userId:o==null?void 0:o.id}),f(x()))}return e.jsxs("section",{className:"w-full",children:[e.jsxs(P,{children:[e.jsx(S,{children:l("books")}),!a&&e.jsx(G,{title:l("btnAddBook"),defaultValue:m.name,handleInputChange:B,onAddEntity:g,placeholder:l("bookName")})]}),r&&e.jsx(Q,{msg:s instanceof Error?s.message:""}),n&&e.jsx(T,{msg:l("EmptyMsg.books")}),!!t&&e.jsx(q,{children:t.map(c=>e.jsx(D,{children:e.jsx(F,{book:c})},c.id))}),i&&e.jsx(H,{}),!!t&&d&&t.length>=d*12&&!!u&&e.jsx("div",{ref:u,className:"h-12 w-full bg-transparent"}),a&&e.jsx("div",{className:"mt-3 flex items-center justify-end",children:e.jsx($,{onClick:v,children:l("seeAll.books")})})]})};export{O as B};
